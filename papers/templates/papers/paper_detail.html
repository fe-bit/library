{% extends "base.html" %}
{% load highlight %}
{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">{{ paper.title }}</h1>
    <div class="card">
        <div class="card-body">
            <ul class="nav nav-tabs" id="paperTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="details-tab" data-bs-toggle="tab" data-bs-target="#details" type="button" role="tab" aria-controls="details" aria-selected="true">Details</button>
                </li>
                {% if paper.ai_summary %}
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="ai-summary-tab" data-bs-toggle="tab" data-bs-target="#ai-summary" type="button" role="tab" aria-controls="ai-summary" aria-selected="false">AI Summary</button>
                </li>
                {% endif %}
            </ul>
            <div class="tab-content" id="paperTabContent">
                <div class="tab-pane fade show active" id="details" role="tabpanel" aria-labelledby="details-tab">
                    <p><strong>Authors:</strong> {{ paper.authors }}</p>
                    <p><strong>Year:</strong> {{ paper.year }}</p>
                    <p><strong>URL:</strong> <a href="{{ paper.url }}">{{ paper.url }}</a></p>
                    <p><strong>Further Information:</strong> {{ paper.further_information }}</p>
                    {% if paper.file %}
                    <p><a href="{{ paper.file.url }}" class="btn btn-primary">Download File</a></p>
                    {% endif %}
                    <a href="{% url 'paper_edit' paper.pk %}" class="btn btn-warning">Edit</a>
                    <a href="{% url 'paper_delete' paper.pk %}" class="btn btn-danger">Delete</a>
                    <a href="{% url 'paper_list' %}" class="btn btn-secondary">Back to list</a>
                </div>
                {% if paper.ai_summary %}
                <div class="tab-pane fade" id="ai-summary" role="tabpanel" aria-labelledby="ai-summary-tab">
                    <p><strong>AI Summary:</strong> {{ paper.ai_summary|markdown_to_html|safe }}</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}